---
interface Props {
  variant?: "light" | "dark";
}

const { variant = "light" } = Astro.props;
const uniqueId = `waves-${Math.random().toString(36).substring(2, 11)}`;
---

<div class="absolute inset-0 overflow-hidden pointer-events-none" data-variant={variant}>
  <svg viewBox="0 0 400 400" class="w-full h-full" preserveAspectRatio="xMidYMid slice" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <linearGradient id={`waveGrad1-${uniqueId}`} x1="0%" y1="0%" x2="0%" y2="100%">
        <stop offset="0%" stop-color="var(--color-primary)" stop-opacity="0.6" />
        <stop offset="100%" stop-color="var(--color-secondary)" stop-opacity="0.2" />
      </linearGradient>

      <linearGradient id={`waveGrad2-${uniqueId}`} x1="0%" y1="0%" x2="0%" y2="100%">
        <stop offset="0%" stop-color="var(--color-secondary)" stop-opacity="0.5" />
        <stop offset="100%" stop-color="var(--color-primary)" stop-opacity="0.3" />
      </linearGradient>
    </defs>

    {/* Wave 1 - Background */}
    <path
      class="wave wave-1"
      d="M 0,200 Q 100,150 200,180 T 400,200 L 400,400 L 0,400 Z"
      fill={`url(#waveGrad1-${uniqueId})`}
      opacity="0.4"
    />

    {/* Wave 2 - Middle */}
    <path
      class="wave wave-2"
      d="M 0,240 Q 80,200 160,230 T 400,260 L 400,400 L 0,400 Z"
      fill={`url(#waveGrad2-${uniqueId})`}
      opacity="0.5"
    />

    {/* Wave 3 - Front */}
    <path
      class="wave wave-3"
      d="M 0,280 Q 120,240 240,270 T 400,300 L 400,400 L 0,400 Z"
      fill={`url(#waveGrad1-${uniqueId})`}
      opacity="0.6"
    />

    {/* Floating Circles */}
    <circle class="floating floating-1" cx="80" cy="150" r="4" fill="var(--color-primary)" opacity="0.6" />
    <circle class="floating floating-2" cx="200" cy="120" r="5" fill="var(--color-secondary)" opacity="0.7" />
    <circle class="floating floating-3" cx="320" cy="160" r="3" fill="var(--color-primary)" opacity="0.5" />

    {/* Flowing Stroke Waves */}
    <path
      class="stroke-wave"
      d="M -100,100 Q 0,80 100,100 T 300,100 T 500,100"
      fill="none"
      stroke="var(--color-primary)"
      stroke-width="2"
      opacity="0.5"
    />
  </svg>
</div>

<style>
  [data-variant="dark"] {
    --color-primary: #b4e565;
    --color-secondary: #9dd84f;
  }

  .wave-1 {
    animation: waveMotion1 12s ease-in-out infinite;
  }

  .wave-2 {
    animation: waveMotion2 10s ease-in-out infinite;
  }

  .wave-3 {
    animation: waveMotion3 14s ease-in-out infinite;
  }

  @keyframes waveMotion1 {
    0%, 100% {
      d: path("M 0,200 Q 100,150 200,180 T 400,200 L 400,400 L 0,400 Z");
    }
    50% {
      d: path("M 0,210 Q 100,140 200,190 T 400,190 L 400,400 L 0,400 Z");
    }
  }

  @keyframes waveMotion2 {
    0%, 100% {
      d: path("M 0,240 Q 80,200 160,230 T 400,260 L 400,400 L 0,400 Z");
    }
    50% {
      d: path("M 0,250 Q 80,190 160,240 T 400,250 L 400,400 L 0,400 Z");
    }
  }

  @keyframes waveMotion3 {
    0%, 100% {
      d: path("M 0,280 Q 120,240 240,270 T 400,300 L 400,400 L 0,400 Z");
    }
    50% {
      d: path("M 0,290 Q 120,230 240,280 T 400,290 L 400,400 L 0,400 Z");
    }
  }

  .floating {
    animation: float 8s ease-in-out infinite;
  }

  .floating-1 {
    animation-duration: 10s;
  }

  .floating-2 {
    animation-duration: 12s;
    animation-delay: 2s;
  }

  .floating-3 {
    animation-duration: 9s;
    animation-delay: 1s;
  }

  @keyframes float {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-30px);
    }
  }

  .stroke-wave {
    animation: slideWave 15s linear infinite;
  }

  @keyframes slideWave {
    from { transform: translateX(0); }
    to { transform: translateX(100px); }
  }
</style>
