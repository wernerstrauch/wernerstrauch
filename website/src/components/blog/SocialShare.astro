---
/**
 * SocialShare Component
 *
 * Social media sharing icons for blog posts.
 * Includes X (Twitter), LinkedIn, Facebook, and Email.
 */

interface Props {
  /** Full URL of the page to share */
  url: string;
  /** Title of the content to share */
  title: string;
  /** Layout direction */
  direction?: "horizontal" | "vertical";
  /** Show labels next to icons */
  showLabels?: boolean;
}

const {
  url,
  title,
  direction = "horizontal",
  showLabels = false,
} = Astro.props;

// Encode for URL parameters
const encodedUrl = encodeURIComponent(url);
const encodedTitle = encodeURIComponent(title);

// Share URLs
const shareLinks = {
  twitter: `https://x.com/intent/post?url=${encodedUrl}&text=${encodedTitle}`,
  linkedin: `https://www.linkedin.com/shareArticle?mini=true&url=${encodedUrl}&title=${encodedTitle}`,
  facebook: `https://www.facebook.com/sharer.php?u=${encodedUrl}`,
  email: `mailto:?subject=${encodedTitle}&body=${encodedTitle}%0A%0A${encodedUrl}`,
};
---

<div
  class:list={[
    "social-share",
    direction === "vertical" ? "flex-col" : "flex-row",
  ]}
>
  {/* X (Twitter) */}
  <a
    href={shareLinks.twitter}
    target="_blank"
    rel="noopener noreferrer"
    class="social-share__link"
    aria-label="Auf X teilen"
    title="Auf X teilen"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 24 24"
      fill="currentColor"
      class="social-share__icon"
    >
      <path
        d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"
      ></path>
    </svg>
    {showLabels && <span>X</span>}
  </a>

  {/* LinkedIn */}
  <a
    href={shareLinks.linkedin}
    target="_blank"
    rel="noopener noreferrer"
    class="social-share__link"
    aria-label="Auf LinkedIn teilen"
    title="Auf LinkedIn teilen"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 24 24"
      fill="currentColor"
      class="social-share__icon"
    >
      <path
        d="M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"
      ></path>
    </svg>
    {showLabels && <span>LinkedIn</span>}
  </a>

  {/* Facebook */}
  <a
    href={shareLinks.facebook}
    target="_blank"
    rel="noopener noreferrer"
    class="social-share__link"
    aria-label="Auf Facebook teilen"
    title="Auf Facebook teilen"
  >
    <svg
      viewBox="0 0 24 24"
      fill="currentColor"
      xmlns="http://www.w3.org/2000/svg"
      class="social-share__icon"
    >
      <path
        d="M5 3h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2m13 2h-2.5A3.5 3.5 0 0 0 12 8.5V11h-2v3h2v7h3v-7h3v-3h-3V9a1 1 0 0 1 1-1h2V5z"
      ></path>
    </svg>
    {showLabels && <span>Facebook</span>}
  </a>

  {/* Email */}
  <a
    href={shareLinks.email}
    class="social-share__link"
    aria-label="Per E-Mail teilen"
    title="Per E-Mail teilen"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 -960 960 960"
      fill="currentColor"
      class="social-share__icon"
    >
      <path
        d="M160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720v480q0 33-23.5 56.5T800-160H160Zm320-280L160-640v400h640v-400L480-440Zm0-80 320-200H160l320 200ZM160-640v-80 480-400Z"
      ></path>
    </svg>
    {showLabels && <span>E-Mail</span>}
  </a>
</div>

<style>
  @reference "../../styles/styles.css";

  .social-share {
    display: flex;
    align-items: center;
    gap: 1.5rem;
  }

  .social-share__link {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--color-gray-500);
    transition: color 0.2s ease;
  }

  .social-share__link:hover {
    color: var(--primary);
  }

  .social-share__icon {
    width: 1.25rem;
    height: 1.25rem;
  }

  /* Vertical layout adjustments */
  .social-share.flex-col {
    gap: 1rem;
  }

  .social-share.flex-col .social-share__link {
    gap: 0.75rem;
  }
</style>
