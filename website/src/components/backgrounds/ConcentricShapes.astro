---
interface Props {
  color?: string;
  opacity?: number;
  position?: "left" | "right" | "center";
  size?: "sm" | "md" | "lg";
  animate?: boolean;
}

const {
  color = "#c8ff00",
  opacity = 0.15,
  position = "right",
  size = "lg",
  animate = true,
} = Astro.props;

// Size configurations
const sizes = {
  sm: { outer: 400, middle: 300, inner: 200 },
  md: { outer: 550, middle: 420, inner: 280 },
  lg: { outer: 700, middle: 520, inner: 340 },
};

const currentSize = sizes[size];

// Position configurations
const positions = {
  left: "left: 5%; top: 50%; transform: translateY(-50%);",
  right: "right: 5%; top: 50%; transform: translateY(-50%);",
  center: "left: 50%; top: 50%; transform: translate(-50%, -50%);",
};
---

<div
  class:list={["concentric-shapes-container pointer-events-none absolute", animate && "animate"]}
  style={positions[position]}
  data-color={color}
>
  {/* Outer ring */}
  <div
    class="concentric-ring ring-outer absolute"
    style={`
      width: ${currentSize.outer}px;
      height: ${currentSize.outer}px;
      border-color: ${color};
      opacity: ${opacity};
    `}
  />

  {/* Middle ring */}
  <div
    class="concentric-ring ring-middle absolute"
    style={`
      width: ${currentSize.middle}px;
      height: ${currentSize.middle}px;
      border-color: ${color};
      opacity: ${opacity * 1.2};
    `}
  />

  {/* Inner ring */}
  <div
    class="concentric-ring ring-inner absolute"
    style={`
      width: ${currentSize.inner}px;
      height: ${currentSize.inner}px;
      border-color: ${color};
      opacity: ${opacity * 1.5};
    `}
  />

  {/* Optional glow effect in center */}
  <div
    class="concentric-glow absolute"
    style={`
      width: ${currentSize.inner * 0.6}px;
      height: ${currentSize.inner * 0.6}px;
      background: radial-gradient(circle, ${color} 0%, transparent 70%);
      opacity: ${opacity * 0.5};
    `}
  />
</div>

<style>
  .concentric-shapes-container {
    z-index: 0;
  }

  .concentric-ring {
    border-radius: 50%;
    border-width: 1px;
    border-style: solid;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }

  .concentric-glow {
    border-radius: 50%;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    filter: blur(40px);
  }

  /* Subtle animation */
  .animate .ring-outer {
    animation: pulse-outer 8s ease-in-out infinite;
  }

  .animate .ring-middle {
    animation: pulse-middle 8s ease-in-out infinite;
    animation-delay: 0.5s;
  }

  .animate .ring-inner {
    animation: pulse-inner 8s ease-in-out infinite;
    animation-delay: 1s;
  }

  .animate .concentric-glow {
    animation: glow-pulse 4s ease-in-out infinite;
  }

  @keyframes pulse-outer {
    0%, 100% {
      transform: translate(-50%, -50%) scale(1);
      opacity: var(--ring-opacity, 0.15);
    }
    50% {
      transform: translate(-50%, -50%) scale(1.03);
      opacity: calc(var(--ring-opacity, 0.15) * 1.3);
    }
  }

  @keyframes pulse-middle {
    0%, 100% {
      transform: translate(-50%, -50%) scale(1);
      opacity: calc(var(--ring-opacity, 0.15) * 1.2);
    }
    50% {
      transform: translate(-50%, -50%) scale(1.04);
      opacity: calc(var(--ring-opacity, 0.15) * 1.5);
    }
  }

  @keyframes pulse-inner {
    0%, 100% {
      transform: translate(-50%, -50%) scale(1);
      opacity: calc(var(--ring-opacity, 0.15) * 1.5);
    }
    50% {
      transform: translate(-50%, -50%) scale(1.05);
      opacity: calc(var(--ring-opacity, 0.15) * 1.8);
    }
  }

  @keyframes glow-pulse {
    0%, 100% {
      opacity: var(--glow-opacity, 0.075);
      transform: translate(-50%, -50%) scale(1);
    }
    50% {
      opacity: calc(var(--glow-opacity, 0.075) * 1.5);
      transform: translate(-50%, -50%) scale(1.1);
    }
  }

  /* Reduce motion support */
  @media (prefers-reduced-motion: reduce) {
    .animate .ring-outer,
    .animate .ring-middle,
    .animate .ring-inner,
    .animate .concentric-glow {
      animation: none;
    }
  }

  /* Responsive - smaller on mobile */
  @media (max-width: 768px) {
    .concentric-ring,
    .concentric-glow {
      transform: translate(-50%, -50%) scale(0.6);
    }
  }
</style>
