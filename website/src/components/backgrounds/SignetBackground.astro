---
interface Props {
  opacity?: number;
  position?: "bottom-right" | "bottom-left" | "top-right" | "top-left" | "center";
  size?: "sm" | "md" | "lg" | "xl" | "2xl";
  animate?: boolean;
}

const {
  opacity = 0.06,
  position = "bottom-right",
  size = "xl",
  animate = false,
} = Astro.props;

// Size configurations - aspect ratio 568.43 x 423.16 â‰ˆ 1.34:1
const sizes = {
  sm: { width: 200, height: 150 },
  md: { width: 350, height: 260 },
  lg: { width: 500, height: 375 },
  xl: { width: 700, height: 520 },
  "2xl": { width: 900, height: 670 },
};

// Position configurations - fully visible within section
const positions = {
  "bottom-right": { right: "2rem", bottom: "2rem", left: "auto", top: "auto" },
  "bottom-left": { left: "2rem", bottom: "2rem", right: "auto", top: "auto" },
  "top-right": { right: "2rem", top: "2rem", left: "auto", bottom: "auto" },
  "top-left": { left: "2rem", top: "2rem", right: "auto", bottom: "auto" },
  center: { left: "50%", top: "50%", right: "auto", bottom: "auto", transform: "translate(-50%, -50%)" },
};

// Generate unique IDs for gradients to avoid conflicts
const uniqueId = Math.random().toString(36).substring(2, 9);

const { width, height } = sizes[size];
const posStyle = positions[position];
---

<div class="absolute inset-0 overflow-hidden pointer-events-none">
  <svg
    class:list={["signet-bg absolute", animate && "signet-bg--animate"]}
    style={`
      width: ${width}px;
      height: ${height}px;
      ${posStyle.right ? `right: ${posStyle.right};` : ""}
      ${posStyle.left ? `left: ${posStyle.left};` : ""}
      ${posStyle.top ? `top: ${posStyle.top};` : ""}
      ${posStyle.bottom ? `bottom: ${posStyle.bottom};` : ""}
      ${posStyle.transform ? `transform: ${posStyle.transform};` : ""}
      opacity: ${opacity};
    `}
    viewBox="0 0 568.43 423.16"
    aria-hidden="true"
  >
    <defs>
      <linearGradient id={`signet-grad-${uniqueId}`} x1="568.43" y1="211.58" x2="0" y2="211.58" gradientUnits="userSpaceOnUse">
        <stop offset="0" stop-color="#94c605"/>
        <stop offset="1" stop-color="#ddff70"/>
      </linearGradient>
    </defs>
    <path
      d="M568.43,0h-189.86c-57.83,0-110.7,36.49-136.56,94.25l-95.13,212.47c-21.25,47.46-58.51,83.55-103.59,100.33L0,423.16h189.86c57.83,0,110.7-36.49,136.56-94.25l95.13-212.47c21.25-47.46,58.51-83.55,103.59-100.33L568.43,0Z"
      fill={`url(#signet-grad-${uniqueId})`}
    />
  </svg>
</div>

<style>
  .signet-bg {
    transition: all 0.7s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .signet-bg--animate {
    animation: signet-float 20s ease-in-out infinite;
  }

  @keyframes signet-float {
    0%, 100% {
      transform: translateY(0) scale(1);
    }
    50% {
      transform: translateY(-15px) scale(1.02);
    }
  }

  /* Respect reduced motion preference */
  @media (prefers-reduced-motion: reduce) {
    .signet-bg--animate {
      animation: none;
    }
  }
</style>
