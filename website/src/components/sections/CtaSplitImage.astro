---
import Container from "@components/shared/Container.astro";
import Button from "@components/shared/Button.astro";
import { Icon } from "astro-icon/components";
import type { SectionVariant } from "../../types";

interface Props {
  sectionVariant?: SectionVariant;
  eyebrow?: string;
  headline?: string;
  description?: string;
  primaryCta?: string;
  primaryCtaHref?: string;
  image?: string;
  imageAlt?: string;
  imagePosition?: "left" | "right";
}

const {
  sectionVariant = "white",
  eyebrow = "E-Commerce Experten",
  headline = "Wir sind für dich da",
  description = "Lass uns gemeinsam herausfinden, wo dein Shop das größte Potenzial hat. Im kostenlosen Erstgespräch analysieren wir deine Situation und zeigen dir konkrete nächste Schritte.",
  primaryCta = "Kostenloses Erstgespräch",
  primaryCtaHref,
  image = "https://images.unsplash.com/photo-1525130413817-d45c1d127c42?ixlib=rb-1.2.1&auto=format&fit=crop&w=1920&q=60",
  imageAlt = "Team bei der Arbeit",
  imagePosition = "left",
} = Astro.props;

// Variant-based styles
const isDarkVariant = sectionVariant === "dark" || sectionVariant === "primary";

// Button variant
const primaryButtonVariant = isDarkVariant ? "white" : "primary";

// Position classes
const isLeft = imagePosition === "left";
---

<div
  class="ctasplitimage-section relative isolate overflow-hidden"
  data-variant={sectionVariant}
>
  {/* Image section */}
  <div
    class:list={[
      "relative h-80 overflow-hidden md:absolute md:h-full md:w-1/3 lg:w-1/2",
      isLeft ? "md:left-0" : "md:right-0",
    ]}
  >
    <img src={image} alt={imageAlt} class="size-full object-cover" />
  </div>

  {/* Content section */}
  <Container>
    <div class="relative py-16 sm:py-20 lg:py-24">
      <div
        class:list={[
          "px-0 md:w-2/3 lg:w-1/2",
          isLeft
            ? "md:ml-auto md:pl-16 lg:pl-24 xl:pl-32"
            : "md:mr-auto md:pr-16 lg:pr-24 xl:pr-32",
        ]}
      >
        {/* Eyebrow */}
        {
          eyebrow && (
            <p class="ctasplitimage-eyebrow blur-in text-base font-semibold">
              {eyebrow}
            </p>
          )
        }

        {/* Headline */}
        <h2
          class="ctasplitimage-headline scale-up mt-2 text-3xl font-bold tracking-tight sm:text-4xl lg:text-5xl"
          style="transition-delay: 100ms;"
        >
          {headline}
        </h2>

        {/* Description */}
        <p
          class="ctasplitimage-description fade-up mt-6 text-lg/7"
          style="transition-delay: 150ms;"
        >
          {description}
        </p>

        {/* CTA */}
        {
          primaryCta && (
            <div class="fade-up mt-8" style="transition-delay: 200ms;">
              <Button
                href={primaryCtaHref}
                variant={primaryButtonVariant}
                size="lg"
                data-open-funnel={!primaryCtaHref}
              >
                <Icon name="heroicons:calendar-days-16-solid" class="h-4 w-4" />
                <span>{primaryCta}</span>
              </Button>
            </div>
          )
        }
      </div>
    </div>
  </Container>
</div>

<style>
  /* ========================================
     Uses --section-* variables set by data-section-theme
     attribute on parent Section component
     ======================================== */

  /* ========================================
     Eyebrow styles
     ======================================== */
  .ctasplitimage-eyebrow {
    color: var(--section-accent);
  }

  /* ========================================
     Headline styles
     ======================================== */
  .ctasplitimage-headline {
    color: var(--section-text);
  }

  .ctasplitimage-description {
    color: var(--section-text-muted);
  }
</style>
